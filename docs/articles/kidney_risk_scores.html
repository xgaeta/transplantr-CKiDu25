<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kidney Donor and Recipient Risk Index • transplantr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Kidney Donor and Recipient Risk Index">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">transplantr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/egfr.html">Estimated GFR</a>
    </li>
    <li>
      <a href="../articles/hla_mismatch_grade.html">HLA Mismatch Level</a>
    </li>
    <li>
      <a href="../articles/kidney_risk_scores.html">Kidney Donor and Recipient Risk Index</a>
    </li>
    <li>
      <a href="../articles/liver_recipient_scoring.html">Liver transplant risk stratification</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnasher/transplantr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Kidney Donor and Recipient Risk Index</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/johnasher/transplantr/blob/HEAD/vignettes/kidney_risk_scores.Rmd" class="external-link"><code>vignettes/kidney_risk_scores.Rmd</code></a></small>
      <div class="hidden name"><code>kidney_risk_scores.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The transplantr package includes vectorised functions to calculate a
number of different deceased donor kidney risk indices which are based
on Cox models of transplant survival and can be used to audit or risk
adjust transplant outcome data.</p>
<p>The models included in version 0.1.0 are:</p>
<ul>
<li>UK Kidney Donor Risk Index (2019 version):
<code><a href="../reference/ukkdri.html">ukkdri()</a></code>
</li>
<li>UK Kidney Donor Risk Index (2012 version):
<code><a href="../reference/watson_ukkdri.html">watson_ukkdri()</a></code>
</li>
<li>UK Kidney Recipient Risk Index: <code><a href="../reference/ukkrri.html">ukkrri()</a></code>
</li>
<li>US Kidney Donor Risk Index: <code><a href="../reference/uskdri.html">uskdri()</a></code>
</li>
<li>US Estimated Post-Transplant Survival Score (EPTS):
<code><a href="../reference/raw_epts.html">raw_epts()</a></code>
</li>
</ul>
<p>The US risk index uses donor creatinine as a parameter, and the
<code><a href="../reference/uskdri.html">uskdri()</a></code> function in this package uses creatinine measured
in mcmol/l as the default for all functions, but creatinine can be
entered in mg/dl either by setting the optional <code>units</code>
parameter to “SI” or by calling the wrapper function
<code><a href="../reference/uskdri_US.html">uskdri_US()</a></code> instead. All of the functions in transplantr
using creatinine or bilirubin use units in the same way - for mg/dl
either use <code>units == "US"</code> or call the <code>..._US()</code>
wrapper function.</p>
<p>To start, load the transplantr library and I would also recommend
using dplyr to incorporate the results of these functions into your
datasets:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://transplantr.txtools.net" class="external-link">transplantr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="uk-kidney-donor-and-recipient-risk-indices-2019">UK Kidney Donor and Recipient Risk Indices (2019)<a class="anchor" aria-label="anchor" href="#uk-kidney-donor-and-recipient-risk-indices-2019"></a>
</h2>
<p>The current UK Kidney Donor and Recipient Risk Indices(<em>1</em>)
are based on transplant and recipient survival data from the UK National
Transplant Database and have been incorporated into the new deceased
donor kidney matching scheme launched in September 2019, which aims to
match expected transplant and recipient survival (although a number of
other factors are also used in the algorithm).</p>
<div class="section level3">
<h3 id="uk-kidney-donor-risk-index">UK Kidney Donor Risk Index<a class="anchor" aria-label="anchor" href="#uk-kidney-donor-risk-index"></a>
</h3>
<p>The <code><a href="../reference/ukkdri.html">ukkdri()</a></code> function calculates the donor risk and uses
the following parameters:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="43%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>donor age in years</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>height</td>
<td>donor height in cm</td>
<td>numeric vector</td>
</tr>
<tr class="odd">
<td>htn</td>
<td>donor history of hypertension</td>
<td>numeric vector of values of 1 (yes) or 0 (no)</td>
</tr>
<tr class="even">
<td>sex</td>
<td>donor sex</td>
<td>character vector of values of “F” or “M”</td>
</tr>
<tr class="odd">
<td>cmv</td>
<td>whether donor is CMV seropositive</td>
<td>numeric vector of values of 1 (yes) or 0 (no)</td>
</tr>
<tr class="even">
<td>gfr</td>
<td>donor eGFR in ml/min</td>
<td>numeric vector</td>
</tr>
<tr class="odd">
<td>hdays</td>
<td>length of donor hospital stay</td>
<td>numeric vector</td>
</tr>
</tbody>
</table>
<p>Using vectors of 1 and 0 is more efficient than TRUE/FALSE or
“Male”/“Female”, but if your dataset uses these values instead, it is
easy enough to convert them with the dplyr::mutate() verb:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"kidney.donors"</span><span class="op">)</span></span>
<span><span class="va">kidney.donors</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">#&gt;   Donor.Age Donor.Height Donor.Hypertension Donor.Sex Donor.CMV Donor.GFR</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        34          165 TRUE               F         Neg              91</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        51          177 FALSE              M         Pos              74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        65          154 TRUE               F         Pos              63</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        78          183 FALSE              M         Pos              54</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: Donor.Hospital_Stay &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># change required variables to 1/0</span></span>
<span><span class="va">kidney.donors2</span> <span class="op">=</span> <span class="va">kidney.donors</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Donor.Hypertension <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Donor.Hypertension</span> <span class="op">==</span> <span class="cn">TRUE</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>         Donor.Sex <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Donor.Sex</span> <span class="op">==</span> <span class="st">"F"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>        Donor.CMV <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Donor.CMV</span> <span class="op">==</span> <span class="st">"Pos"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view updated dataset</span></span>
<span><span class="va">kidney.donors2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 7</span></span></span>
<span><span class="co">#&gt;   Donor.Age Donor.Height Donor.Hypertension Donor.Sex Donor.CMV Donor.GFR</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        34          165                  1         1         0        91</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        51          177                  0         0         1        74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        65          154                  1         1         1        63</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        78          183                  0         0         1        54</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: Donor.Hospital_Stay &lt;dbl&gt;</span></span></span></code></pre></div>
<p>The result can be converted into quartiles using the
<code><a href="../reference/ukkdri_q.html">ukkdri_q()</a></code> function. This takes a numeric vector of donor
risk index values as its input and returns a vector of quartiles. This
is reported a 1-4 by default, but can be prefixed with a “D” to match
the NHSBT ODT nomenclature if the optional <code>prefix</code> parameter
is set to TRUE, and can be reported as a factor vector by setting
<code>fct</code> to TRUE.</p>
<p>Generating the results is also easy to do with <em>dplyr</em>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate UKKDRI </span></span>
<span><span class="va">kidney.donors3</span> <span class="op">=</span> <span class="va">kidney.donors2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>UKKDRI <span class="op">=</span> <span class="fu"><a href="../reference/ukkdri.html">ukkdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">Donor.Age</span>, height <span class="op">=</span> <span class="va">Donor.Height</span>, htn <span class="op">=</span> <span class="va">Donor.Hypertension</span>,</span>
<span>                         sex <span class="op">=</span> <span class="va">Donor.Sex</span>, cmv <span class="op">=</span> <span class="va">Donor.CMV</span>, gfr <span class="op">=</span> <span class="va">Donor.GFR</span>, </span>
<span>                         hdays <span class="op">=</span> <span class="va">Donor.Hospital_Stay</span><span class="op">)</span>,</span>
<span>         UKKDRI.Quartile <span class="op">=</span> <span class="fu"><a href="../reference/ukkdri_q.html">ukkdri_q</a></span><span class="op">(</span><span class="va">UKKDRI</span>, prefix <span class="op">=</span> <span class="cn">TRUE</span>, fct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># display results (with selected variables)</span></span>
<span><span class="va">kidney.donors3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Donor.Age</span>, <span class="va">Donor.GFR</span>, <span class="va">UKKDRI</span>, <span class="va">UKKDRI.Quartile</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   Donor.Age Donor.GFR UKKDRI UKKDRI.Quartile</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        34        91   1.00 D2             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        51        74   1.19 D3             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        65        63   2.90 D4             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        78        54   2.15 D4</span></span></code></pre></div>
<p>Although vectorised functions, <code><a href="../reference/ukkdri.html">ukkdri()</a></code> and
<code><a href="../reference/ukkdri_q.html">ukkdri_q()</a></code> will also work with single values:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ukkdri.html">ukkdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">50</span>, height <span class="op">=</span> <span class="fl">170</span>, htn <span class="op">=</span> <span class="fl">1</span>, sex <span class="op">=</span> <span class="st">"F"</span>, cmv <span class="op">=</span> <span class="fl">0</span>, gfr <span class="op">=</span> <span class="fl">90</span>, hdays <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9950125</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ukkdri_q.html">ukkdri_q</a></span><span class="op">(</span><span class="fl">0.8572</span>, prefix <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "D2"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="uk-recipient-risk-index">UK Recipient Risk Index<a class="anchor" aria-label="anchor" href="#uk-recipient-risk-index"></a>
</h3>
<p>The <code><a href="../reference/ukkrri.html">ukkrri()</a></code> function calculates the UK Kidney Recipient
Risk Index using the following parameters:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>recipient age in years</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>dx</td>
<td>whether recipient on dialysis at time of listing</td>
<td>numeric vector of 1 (yes) and 0 (no)</td>
</tr>
<tr class="odd">
<td>wait</td>
<td>waiting time since start of dialysis in days</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>dm</td>
<td>whether recipient has diabetes</td>
<td>numeric vector of 1 (yes) and 0 (no)</td>
</tr>
</tbody>
</table>
<p>Like the donor risk index, the UKKRRI can be converted into quartiles
of risk using the <code><a href="../reference/ukkrri_q.html">ukkrri_q()</a></code> function, which like the
<code><a href="../reference/ukkdri_q.html">ukkdri_q()</a></code> function takes optional parameters to indicate
whether a prefix or factor is wanted in the output.</p>
<p>The easiest way to generate the UKKRRI data column is again to use
dplyr::mutate() verb:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kidney.recipients2</span> <span class="op">=</span> <span class="va">kidney.recipients</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>UKKRRI <span class="op">=</span> <span class="fu"><a href="../reference/ukkrri.html">ukkrri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">Recipient.Age</span>, dx <span class="op">=</span> <span class="va">Recipient.OnDialysis</span>, </span>
<span>                         wait <span class="op">=</span> <span class="va">Recipient.Waittime</span>, dm <span class="op">=</span> <span class="va">Recipient.Diabetes</span><span class="op">)</span>,</span>
<span>         UKKRRI.Quartile <span class="op">=</span> <span class="fu"><a href="../reference/ukkrri_q.html">ukkrri_q</a></span><span class="op">(</span><span class="va">UKKRRI</span>, prefix <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="uk-kidney-donor-risk-index-2012">UK Kidney Donor Risk Index (2012)<a class="anchor" aria-label="anchor" href="#uk-kidney-donor-risk-index-2012"></a>
</h2>
<p>The first version of the UK Kidney Donor Risk Index was published by
Watson et al.(<em>2</em>) and based on Cox regression of kidney
transplant survival from the UK National Transplant Registry. It is
simpler than the US KDRI and slightly outperforms the US KDRI when
applied to the UK transpant series. It can be calculated using the
<code><a href="../reference/watson_ukkdri.html">watson_ukkdri()</a></code> function, which includes these
variables:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>donor age in years</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>htn</td>
<td>whether donor has history of hypertension</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
<tr class="odd">
<td>weight</td>
<td>donor weight in kg</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>hdays</td>
<td>length of donor hospital stay</td>
<td>numeric vector</td>
</tr>
<tr class="odd">
<td>adrenaline</td>
<td>whether donor treated with adrenaline infusion</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
</tbody>
</table>
<p>It can be called within a <em>dplyr</em> pipe as above, or as a
single calculation:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/watson_ukkdri.html">watson_ukkdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">40</span>, htn <span class="op">=</span> <span class="fl">0</span>, weight <span class="op">=</span> <span class="fl">75</span>, hdays <span class="op">=</span> <span class="fl">0</span>, adrenaline <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="us-kidney-donor-risk-index">US Kidney Donor Risk Index<a class="anchor" aria-label="anchor" href="#us-kidney-donor-risk-index"></a>
</h2>
<p>The US Kidney Donor Risk Index is a longer established risk
stratification tool developed from American registry data, and can be
calculated using the <code><a href="../reference/uskdri.html">uskdri()</a></code> function. The donor’s serum
creatinine is one of the parameters used, and like the other functions
in <em>transplantr</em> the default unit is µmol/l but can be changed to
mg/dl either by setting the <code>units</code> parameter to
<code>"US</code> or by calling the <code><a href="../reference/uskdri_US.html">uskdri_US()</a></code> wrapper
function. The risk index function uses these variables:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>donor age in years</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>height</td>
<td>donor height in cm</td>
<td>numeric vector</td>
</tr>
<tr class="odd">
<td>weight</td>
<td>donor weight in kg</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>eth</td>
<td>donor ethnicity</td>
<td>character string vector of “black” or “non-black”</td>
</tr>
<tr class="odd">
<td>htn</td>
<td>whether donor has history of hypertension</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
<tr class="even">
<td>dm</td>
<td>whether donor has diabetes mellitus</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
<tr class="odd">
<td>cva</td>
<td>whether donor cause of death was CVA</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
<tr class="even">
<td>creat</td>
<td>donor creatinine</td>
<td>numeric vector</td>
</tr>
<tr class="odd">
<td>hcv</td>
<td>whether donor has hepatitis C seropositive</td>
<td>numeric vector of 1 = yes, 0 = no</td>
</tr>
<tr class="even">
<td>dcd</td>
<td>whether donor is DCD</td>
<td>numeric vector of 1 = DCD, 0 = DBD</td>
</tr>
<tr class="odd">
<td>scaling</td>
<td>OPTN Scaling Factor</td>
<td>single number (defaults to 1)</td>
</tr>
<tr class="even">
<td>units</td>
<td>creatinine units</td>
<td>single string of “SI” for µmol/l or “US” for mg/dl</td>
</tr>
</tbody>
</table>
<p>The Scaling Factor is the median KDRI for kidney donors in the USA in
the previous year, and is published each year on the <a href="https://optn.transplant.hrsa.gov/resources/allocation-calculators/kdpi-calculator/" class="external-link">OPTN
website</a>, together with a table for converting KDRI to KDPI, which
gives a percentile of risk. For 2019 the scaling factor is approximately
1.2507. This normalises the donor risk within each year, but I think it
obscures inter-year comparisons. The <code>scaling</code> parameter
defaults to 1 so can be left out when a non-scaled KDRI is desired.</p>
<p>As a vectorised function, this works well when calculating US KDRI
for a large series using a <em>dplyr</em> pipe with code like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kidney.donors3us</span> <span class="op">=</span> <span class="va">kidney.donors2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>USKDRI <span class="op">=</span> <span class="fu"><a href="../reference/uskdri.html">uskdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">Donor.Age</span>, height <span class="op">=</span> <span class="va">Donor.Height</span>, weight <span class="op">=</span> <span class="va">Donor.Weight</span>,</span>
<span>                         eth <span class="op">=</span> <span class="va">Donor.Race</span>, htn <span class="op">=</span> <span class="va">Donor.Hypertension</span>, dm <span class="op">=</span> <span class="va">Donor.Diabetes</span>,</span>
<span>                         cva <span class="op">=</span> <span class="va">Donor.CVA</span>, creat <span class="op">=</span> <span class="va">Donor.Creatinine</span>,</span>
<span>                         hcv <span class="op">=</span> <span class="va">Donor.HepatitisC</span>, dcd <span class="op">=</span> <span class="va">Donor.Type</span>, </span>
<span>                         scaling <span class="op">=</span> <span class="fl">1.250697</span>, units <span class="op">=</span> <span class="st">"US"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The function can also be used for a single case:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># with creatinine in µmol/l (units = "SI" can be omitted)</span></span>
<span><span class="fu"><a href="../reference/uskdri.html">uskdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">40</span>, height <span class="op">=</span> <span class="fl">170</span>, weight <span class="op">=</span> <span class="fl">80</span>, eth <span class="op">=</span> <span class="st">"non-black"</span>, htn <span class="op">=</span> <span class="fl">0</span>, dm <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    cva <span class="op">=</span> <span class="fl">0</span>, creat <span class="op">=</span> <span class="fl">120</span>, hcv <span class="op">=</span> <span class="fl">0</span>, dcd <span class="op">=</span> <span class="fl">0</span>, scaling <span class="op">=</span> <span class="fl">1.250697</span>, units <span class="op">=</span> <span class="st">"SI"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.8649717</span></span>
<span></span>
<span><span class="co"># with creatinine in mg/dl and omitting scaling factor</span></span>
<span><span class="fu"><a href="../reference/uskdri.html">uskdri</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">40</span>, height <span class="op">=</span> <span class="fl">170</span>, weight <span class="op">=</span> <span class="fl">80</span>, eth <span class="op">=</span> <span class="st">"non-black"</span>, htn <span class="op">=</span> <span class="fl">0</span>, dm <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    cva <span class="op">=</span> <span class="fl">0</span>, creat <span class="op">=</span> <span class="fl">1.4</span>, hcv <span class="op">=</span> <span class="fl">0</span>, dcd <span class="op">=</span> <span class="fl">0</span>, units <span class="op">=</span> <span class="st">"US"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.091988</span></span></code></pre></div>
<div class="section level3">
<h3 id="us-kdpi">US KDPI<a class="anchor" aria-label="anchor" href="#us-kdpi"></a>
</h3>
<p>The KDPI is a percentile of risk converted from the US KDRI using the
scaling factor and a lookup table published on the OPTN website each
year. There is a <code><a href="../reference/kdpi.html">kdpi()</a></code> function to calculate the KDPI from
the same parameters used the the <code><a href="../reference/uskdri.html">uskdri()</a></code> function and a
matching <code>kdri_US()</code> wrapper function for use when donor
creatinine is measured in mg/dl. The transplantr package also has a
<code><a href="../reference/kdpi_lookup.html">kdpi_lookup()</a></code> function to convert a KDRI score to KDPI
percentile.</p>
<p>These functions require the dplyr package to be installed. The
functions are called in the same way as above, or for a single case:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># with creatinine in µmol/l (units = "SI" can be omitted)</span></span>
<span><span class="fu"><a href="../reference/kdpi.html">kdpi</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">40</span>, height <span class="op">=</span> <span class="fl">170</span>, weight <span class="op">=</span> <span class="fl">80</span>, eth <span class="op">=</span> <span class="st">"non-black"</span>, htn <span class="op">=</span> <span class="fl">0</span>, dm <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    cva <span class="op">=</span> <span class="fl">0</span>, creat <span class="op">=</span> <span class="fl">120</span>, hcv <span class="op">=</span> <span class="fl">0</span>, dcd <span class="op">=</span> <span class="fl">0</span>, scaling <span class="op">=</span> <span class="fl">1.250697</span>, units <span class="op">=</span> <span class="st">"SI"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 35</span></span>
<span></span>
<span><span class="co"># with creatinine in mg/dl</span></span>
<span><span class="fu"><a href="../reference/kdpi_US.html">kdpi_US</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">40</span>, height <span class="op">=</span> <span class="fl">170</span>, weight <span class="op">=</span> <span class="fl">80</span>, eth <span class="op">=</span> <span class="st">"non-black"</span>, htn <span class="op">=</span> <span class="fl">0</span>, dm <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    cva <span class="op">=</span> <span class="fl">0</span>, creat <span class="op">=</span> <span class="fl">1.4</span>, hcv <span class="op">=</span> <span class="fl">0</span>, dcd <span class="op">=</span> <span class="fl">0</span>, scaling <span class="op">=</span> <span class="fl">1.250697</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 36</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="estimated-post-transplant-survival-score-epts">Estimated Post-Transplant Survival Score (EPTS)<a class="anchor" aria-label="anchor" href="#estimated-post-transplant-survival-score-epts"></a>
</h2>
<p>The EPTS(<em>4</em>) is used in the USA to predict patient survival
after adult renal transplantation compared to other patients on the
deceased donor waiting list, and uses age, diabetes status, previous
organ transplants and duration of dialysis as predictors. These generate
a raw EPTS score which is then converter to a percentile of risk using a
<a href="https://optn.transplant.hrsa.gov/media/2973/epts_mapping_table_2018.pdf" class="external-link">lookup
table</a> on the OPTN website.</p>
<p>In the US the EPTS score is used in conjunction with the USKDRI score
to prioritise the 20% of patients with best expected transplant survival
for the 20% of kidneys with best anticipated long-term function.</p>
<p>The EPTS (as a percentile) can be calculated with with the
<code><a href="../reference/epts.html">epts()</a></code> function and the raw EPTS score with the
<code><a href="../reference/raw_epts.html">raw_epts()</a></code> function in the transplantr package. Both
functions take the following parameters:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>recipient age in years</td>
<td>numeric vector</td>
</tr>
<tr class="even">
<td>dm</td>
<td>whether recipient has diabetes</td>
<td>numeric vector of 1 (yes) and 0 (no)</td>
</tr>
<tr class="odd">
<td>prev_tx</td>
<td>whether previous solid organ transplant</td>
<td>numeric vector of 1 (yes) and 0 (no)</td>
</tr>
<tr class="even">
<td>dx</td>
<td>duration of dialysis in years</td>
<td>numeric vector</td>
</tr>
</tbody>
</table>
<p>It should be noted that the age and dx parameters can and should be
used with exact age using decimals and not an integer of number of
years.</p>
<p>The <code><a href="../reference/epts.html">epts()</a></code> function in the transplantr package, which
requires the dplyr package to be installed, currently uses the most
recent published lookup table on the OPTN website, published in March
2019 using SRTR data from 2018. Archives of lookup tables from previous
years are also available on the OPTN website.</p>
<p>Like most of the other functions in the transplantr package, the
<code><a href="../reference/raw_epts.html">raw_epts()</a></code> is vectorised and can be used very efficiently
to calculate multiple scores in a dplyr pipe:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kidney.recipients2a</span> <span class="op">=</span> <span class="va">kidney.recipients</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>EPTS.raw <span class="op">=</span> <span class="fu"><a href="../reference/raw_epts.html">raw_epts</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">Recipient.Age</span>, dm <span class="op">=</span> <span class="va">Recipient.Diabetes</span>, </span>
<span>                             prev_tx <span class="op">=</span> <span class="va">Recipient.PreviousTransplant</span>, dx <span class="op">=</span> <span class="va">Recipient.Waittime</span><span class="op">)</span>,</span>
<span>         EPTS <span class="op">=</span> <span class="fu"><a href="../reference/epts.html">epts</a></span><span class="op">(</span>age <span class="op">=</span> <span class="va">Recipient.Age</span>, dm <span class="op">=</span> <span class="va">Recipient.Diabetes</span>, </span>
<span>                             prev_tx <span class="op">=</span> <span class="va">Recipient.PreviousTransplant</span>, dx <span class="op">=</span> <span class="va">Recipient.Waittime</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>But it can also be used with a single case:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/raw_epts.html">raw_epts</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">23.58</span>, dm <span class="op">=</span> <span class="fl">0</span>, prev_tx <span class="op">=</span> <span class="fl">1</span>, dx <span class="op">=</span> <span class="fl">5.081</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9666283</span></span>
<span><span class="fu"><a href="../reference/epts.html">epts</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">23.58</span>, dm <span class="op">=</span> <span class="fl">0</span>, prev_tx <span class="op">=</span> <span class="fl">1</span>, dx <span class="op">=</span> <span class="fl">5.081</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>NHSBT Policy POL186/10. Kidney Transplantation: Deceased Donor
Allocation. <a href="https://nhsbtdbe.blob.core.windows.net/umbraco-assets-corp/16915/kidney-allocation-policy-pol186.pdf" class="external-link">https://nhsbtdbe.blob.core.windows.net/umbraco-assets-corp/16915/kidney-allocation-policy-pol186.pdf</a>
<em>(viewed 28th December 2019)</em></p></li>
<li><p>Watson CJ, Johnson RJ, Birch R, et al. A Simplified Donor Risk
Index for Predicting Outcome After Deceased Donor Kidney
Transplantation. <em>Transplantation</em> 2012; 93(3):314-318. DOI: <a href="https://doi.org/10.1097/TP.0b013e31823f14d4" class="external-link">10.1097/TP.0b013e31823f14d4</a></p></li>
<li><p>Rao PS, Schaubel DE, Guidinger MK, et al. A Comprehensive Risk
Quantification Score for Deceased Donor Kidneys: The Kidney Donor Risk
Index. <em>Transplantation</em> 2009; 88:231-236. DOI: <a href="https://doi.org/10.1097/TP.0b013e3181ac620b" class="external-link">10.1097/TP.0b013e3181ac620b</a></p></li>
<li><p>Estimated Post-Transplant Survival Score. <a href="https://optn.transplant.hrsa.gov/media/1511/guide_to_calculating_interpreting_epts.pdf" class="external-link">https://optn.transplant.hrsa.gov/media/1511/guide_to_calculating_interpreting_epts.pdf</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Asher.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
