<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HLA Mismatch Level • transplantr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="HLA Mismatch Level">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">transplantr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/egfr.html">Estimated GFR</a>
    </li>
    <li>
      <a href="../articles/hla_mismatch_grade.html">HLA Mismatch Level</a>
    </li>
    <li>
      <a href="../articles/kidney_risk_scores.html">Kidney Donor and Recipient Risk Index</a>
    </li>
    <li>
      <a href="../articles/liver_recipient_scoring.html">Liver transplant risk stratification</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnasher/transplantr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>HLA Mismatch Level</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/johnasher/transplantr/blob/HEAD/vignettes/hla_mismatch_grade.Rmd" class="external-link"><code>vignettes/hla_mismatch_grade.Rmd</code></a></small>
      <div class="hidden name"><code>hla_mismatch_grade.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The national deceased donor matching scheme used in the UK takes into
account the HLA mismatch between donor and potential recipient when
assigning points to determine the matching sequence. Rather than using a
crude number of antigen mismatches, it takes into account the differing
immunological effect of mismatches at different loci and assigns a
mismatch level from the A:B:DR mismatch, as in the table below:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Level</th>
<th>HLA mismatch summary</th>
<th>HLA mismatch combinations</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>000</td>
<td>000</td>
</tr>
<tr class="even">
<td>2</td>
<td>[0 DR and 0/1 B]</td>
<td>100, 010, 110, 200, 210</td>
</tr>
<tr class="odd">
<td>3</td>
<td>[0 DR and 2 B] or [1 DR and 0/1 B]</td>
<td>020, 120, 220, 001, 101, 201, 011, 111, 211</td>
</tr>
<tr class="even">
<td>4</td>
<td>[1 DR and 2 B] or [2 DR]</td>
<td>021, 121, 221, 002, 102, 202, 012, 112, 212, 022, 122, 222</td>
</tr>
</tbody>
</table>
<p>The <em>transplantr</em> package has two vectorised functions to
calculate the mismatch level. The <code><a href="../reference/hla_mm_level.html">hla_mm_level()</a></code> takes
three vectors as arguments, one for each of A, B and DR mismatches,
while the <code><a href="../reference/hla_mm_level_str.html">hla_mm_level_str()</a></code> function takes a single
character string vector representing the mismatch.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://transplantr.txtools.net" class="external-link">transplantr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mismatches</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-hla_mm_level">Using hla_mm_level()<a class="anchor" aria-label="anchor" href="#using-hla_mm_level"></a>
</h2>
<p>This function should be used to calculate match level if the A, B and
DR mismatches are separate variables in the data frame. It uses three
parameters called <code>a</code>, <code>b</code> and <code>dr</code>,
all numeric vectors with possible values of 0 to 2.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new mismatch level variable using a dplyr pipe</span></span>
<span><span class="va">mismatches</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">HLA.MM</span>, <span class="op">-</span><span class="va">HLA.MM.s</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Mismatch.Level <span class="op">=</span> <span class="fu"><a href="../reference/hla_mm_level.html">hla_mm_level</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">HLA.A.MM</span>, b <span class="op">=</span> <span class="va">HLA.B.MM</span>, dr <span class="op">=</span> <span class="va">HLA.DR.MM</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HLA.A.MM HLA.B.MM HLA.DR.MM Mismatch.Level</span></span>
<span><span class="co">#&gt; 1        0        0         0              1</span></span>
<span><span class="co">#&gt; 2        1        1         0              2</span></span>
<span><span class="co">#&gt; 3        2        1         1              3</span></span>
<span><span class="co">#&gt; 4        2        1         2              4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-hla_mm_level_str">Using hla_mm_level_str()<a class="anchor" aria-label="anchor" href="#using-hla_mm_level_str"></a>
</h2>
<p>Instead of three separate vectors, mismatch may be stored as string
such as “1:0:1” or “021” representing A, B and DR mismatches. It is
better to store these in a dataframe as strings rather than as numeric
in case meaningful zeroes are removed from the start!</p>
<p>The <code><a href="../reference/hla_mm_level_str.html">hla_mm_level_str()</a></code> function takes two arguments, the
first <code>mm</code> is for the character string vector for the
mismatches, and the second <code>sep</code> is a logical value
indicating whether separators are used to separate the values for the
each locus. <code>sep</code> defaults to TRUE and essentially tells the
function to use the first, third and fifth characters in the string,
compared to <code>sep = FALSE</code> which takes the first, second and
third characters. It does not matter what the separator character is, as
long as there is both a single character between A and B, and a single
character between B and DR; they do not even need to be the same
character. For example, “1:0:1”, “1-0-1”, “1.0.1” and even “1-0:1” will
all work, but “1:00” will not and neither will “1::0.0”.</p>
<p>Like the <code><a href="../reference/hla_mm_level.html">hla_mm_level()</a></code> function, it is easiest to
implement via a <em>dplyr</em> pipe:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if the HLA.Mismatch variable does not use separators</span></span>
<span><span class="va">mismatches</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">HLA.MM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Mismatch.Level <span class="op">=</span> <span class="fu"><a href="../reference/hla_mm_level_str.html">hla_mm_level_str</a></span><span class="op">(</span>mm <span class="op">=</span> <span class="va">HLA.MM</span>, sep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HLA.MM Mismatch.Level</span></span>
<span><span class="co">#&gt; 1    000              1</span></span>
<span><span class="co">#&gt; 2    110              2</span></span>
<span><span class="co">#&gt; 3    211              3</span></span>
<span><span class="co">#&gt; 4    212              4</span></span>
<span></span>
<span><span class="co"># if the HLA.Mismatch variable does use separators, sep is optional</span></span>
<span><span class="va">mismatches</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">HLA.MM.s</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Mismatch.Level <span class="op">=</span> <span class="fu"><a href="../reference/hla_mm_level_str.html">hla_mm_level_str</a></span><span class="op">(</span>mm <span class="op">=</span> <span class="va">HLA.MM.s</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HLA.MM.s Mismatch.Level</span></span>
<span><span class="co">#&gt; 1    0:0:0              1</span></span>
<span><span class="co">#&gt; 2    1:1:0              2</span></span>
<span><span class="co">#&gt; 3    2:1:1              3</span></span>
<span><span class="co">#&gt; 4    2:1:2              4</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>NHSBT Policy POL186/10. Kidney Transplantation: Deceased Donor
Allocation. <a href="https://nhsbtdbe.blob.core.windows.net/umbraco-assets-corp/16915/kidney-allocation-policy-pol186.pdf" class="external-link">https://nhsbtdbe.blob.core.windows.net/umbraco-assets-corp/16915/kidney-allocation-policy-pol186.pdf</a>
<em>(viewed 28th December 2019)</em></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Asher.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
